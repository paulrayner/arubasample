#!/usr/bin/env ruby
$: << File.expand_path("../lib/", __FILE__)

if(ARGV.size == 0) then
  puts 'USAGE: bulkrename <folder name> <find extension> <replace extension>'
  exit 0
end

folder = ARGV[0]
find_type = ARGV[1]
replace_type = ARGV[2]

Dir.foreach(folder) do |file_name|
 type = File.extname(file_name).gsub(/^\./, '')
 if(type.downcase == find_type.downcase)
   old_name = "#{folder}/" + file_name
   new_name = "#{folder}/" + File.basename(file_name, ".#{type}") + ".#{replace_type}"
   if not File.exists?(new_name)
     File.rename(old_name, new_name)
   end
   puts "Renaming #{old_name} to #{new_name}"
 end
end
